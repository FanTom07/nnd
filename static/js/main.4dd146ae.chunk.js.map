{"version":3,"sources":["panels/Home.js","App.js","index.js"],"names":["Home","props","id","class","fetchedUser","status","first_name","last_name","before","size","src","photo_200","onClick","modal","data-to","width","height","className","openInvites","mode","header","level","subheader","background","style","backgroundPosition","backgroundSize","backgroundRepeat","boxShadow","blueBackground","backgroundColor","App","e","setState","activeModal","currentTarget","dataset","to","go","window","history","pushState","panel","activePanel","state","snackbar","message","scheme","popout","bind","closeModal","this","modalHistory","indexOf","splice","push","addEventListener","goBack","bridge","subscribe","detail","type","schemeAttribute","document","createAttribute","value","data","body","attributes","setNamedItem","theme","send","then","promoBannerProps","access_token","clearInterval","timerID","layout","onClose","fill","autoclose","addGroups","caption","actions","title","action","isWebView","React","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.4dd146ae.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport bridge from '@vkontakte/vk-bridge';\nimport { Panel, PanelHeader, Button, Group, Avatar, Div, PanelHeaderContent, Banner, Title } from '@vkontakte/vkui';\nimport '../css/style.css';\n\nimport Icon56FaceIdOutline from '@vkontakte/icons/dist/56/face_id_outline';\n\nconst Home = props => (\n\t<Panel id={props.id}>\n\t\t\t<div class='snowContainer'>\n\t  <div class='snow'>\n\t\t{props.fetchedUser &&\n    <PanelHeader>\n\t<PanelHeaderContent\n\t  status={`${props.fetchedUser.first_name} ${props.fetchedUser.last_name}`}\n\t  before={<Avatar size={36} src={props.fetchedUser.photo_200} onClick={props.modal} data-to='ava-btn' />}\n\t>\n\t  #НичегоНеДелать\n\t</PanelHeaderContent>\n  </PanelHeader>}\n\t\t<Group>\n\t\t\t<Div>\n\t\t\t<Button before={<Icon56FaceIdOutline width={20} height={20} />} size=\"xl\" className=\"invite-btn\" onClick={() => props.openInvites()} >\n\t\t  Поделиться\n\t\t  </Button>\n\t\t\t</Div>\n\t\t</Group>\n\t\t<Banner\n\t\t\t\tclassName = 'bannerSecond'\n\t\t\t\tmode=\"image\"\n\t\t\t\tsize='m'\n\t\t\t\theader={<Title level = '3'>Нажми сюда</Title>}\n\t\t\t\tid = 'notify'\n\t\t\t\tsubheader='Интересно, что прозойдет?'\n\t\t\t\tbackground={\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\tbackground: '#4986CC',\n\t\t\t\t\tbackgroundPosition: 'right bottom',\n\t\t\t\t\tbackgroundSize: 760,\n\t\t\t\t\tbackgroundRepeat: 'no-repeat',\n\t\t\t\t\tboxShadow:'inset 0px 0px 10px 8px rgba(0,0,0,0.085)'\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t}\n\t\t\t/>\n\t</div>\n\t</div>\n\t</Panel>\n);\n\nHome.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n\tfetchedUser: PropTypes.shape({\n\t\tphoto_200: PropTypes.string,\n\t\tfirst_name: PropTypes.string,\n\t\tlast_name: PropTypes.string,\n\t\tcity: PropTypes.shape({\n\t\ttitle: PropTypes.string, \n\t\t}),\n\t}),\n};\n\nexport default Home;\n","import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport { View, ConfigProvider, Snackbar, Avatar, ScreenSpinner, ActionSheet, ActionSheetItem, ModalCard, ModalRoot} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Home from './panels/Home';\n\nimport Icon16Done from '@vkontakte/icons/dist/16/done';\nimport Icon20StoryOutline from '@vkontakte/icons/dist/20/story_outline';\nimport Icon20ArticleBoxOutline from '@vkontakte/icons/dist/20/article_box_outline';\nimport Icon20UsersOutline from '@vkontakte/icons/dist/20/users_outline';\n\nconst blueBackground = {\n\tbackgroundColor: 'var(--accent)'\n  };\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tmessage: true,\n\t\t\tscheme: 'space_gray',\n\t\t\tactivePanel: 'home',\n\t\t\tactiveModal: null,\n\t\t\tfetchedUser: null,\n\t\t\tsnackbar: null,\n\t\t\tpopout: null,\n\t\t};\n\t\tthis.openInvites = this.openInvites.bind(this);\n\t\tthis.closeModal = this.closeModal.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.openInvites();\n\t  }\n\n\tcloseModal() {\n        this.setState({ activeModal: null });\n    }\n\n    modal = (e) => {\n        this.setState({ activeModal: e.currentTarget.dataset.to })\n\t};\n\t\n\tsetActiveModal(activeModal) {\n\t\tactiveModal = activeModal || null;\n\t\tlet modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\n\n\t\tif (activeModal === null) {\n\t\t\tmodalHistory = [];\n\t\t} else if (modalHistory.indexOf(activeModal) !== -1) {\n\t\t\tmodalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\n\t\t} else {\n\t\t\tmodalHistory.push(activeModal);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tactiveModal,\n\t\t\tmodalHistory\n\t\t});\n\t};\n\n\tcomponentDidMount() {\n\n\t\twindow.addEventListener('popstate', () => this.goBack());\n\n\t\tthis.setState({ popout: <ScreenSpinner /> })\n\n\t\tbridge.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\n\t\t\t\t// Поддержка цветовой темы приложения\n\t\t\t\tcase 'VKWebAppUpdateConfig':\n\t\t\t\t\tlet schemeAttribute = document.createAttribute('scheme');\n\t\t\t\t\tschemeAttribute.value = e.detail.data.scheme ? e.detail.data.scheme : 'client_light';\n\t\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t\t\tthis.setState({ theme: e.detail.data.scheme })\n\n\t\t\t\t\tbridge.send('VKWebAppSetViewSettings', {\n\t\t\t\t\t\t'status_bar_style': e.detail.data.scheme === 'space_gray' ? 'light' : 'dark',\n\t\t\t\t\t\t'action_bar_color': e.detail.data.scheme === 'space_gray' ? '#19191a' : '#ffff'\n\t\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tthis.setState({ fetchedUser: e.detail.data });\n\n\t\t\t\t\t// Запускаем рекламу\n\t\t\t\t\tbridge.send('VKWebAppGetAds')\n\t\t\t\t\t.then((promoBannerProps) => {\n\t\t\t\t\t\tthis.setState({ promoBannerProps });\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.setState({ popout: null })\n\n\n\t\t\t\tdefault:\n\t\t\t}\n\t\t});\n\n\t\tbridge.send('VKWebAppGetUserInfo', {});\n\n\t\tbridge.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppAccessTokenReceived':\n\t\t\t\t\tthis.setState({ access_token: e.detail.data.access_token });\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t}\n\t\t});\n\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.timerID);\n\t}\n\n\t// Переход на страницу\n\tgo = (e) => {\n\t\twindow.history.pushState( { panel: e.currentTarget.dataset.to }, e.currentTarget.dataset.to );\n\t\tthis.setState({ \n\t\t\tactivePanel: e.currentTarget.dataset.to,\n\t\t\thistory: [...this.state.history, e.currentTarget.dataset.to],\n\t\t\tsnackbar: null\n\t\t})\n\t};\n\n\taddGroups() {\n\t\tbridge.send(\"VKWebAppAddToCommunity\");\n\t\tbridge.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppAddToCommunityResult':\n\t\t\t\t\tthis.setState({ snackbar:\n\t\t\t\t\t\t<Snackbar\n\t\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\n\t\t\t\t        before={<Avatar size={24} style={blueBackground}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\n\t\t\t\t\t\t>\n\t\t\t\t\t\tПриложениен успешно добавлено в сообщество.\n\t\t\t\t\t\t</Snackbar>\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppAddToCommunityFailed':\n\t\t\t\t\tthis.setState({ snackbar: null });\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t}\n\t\t});\n\t}\n\n\topenInvites () {\n\t\tthis.setState({ popout:\n\t\t  <ActionSheet onClose={() => this.setState({ popout: null })}>\n\t\t\t<ActionSheetItem autoclose before={<Icon20StoryOutline/>}\n\t\t\t  onClick={() => bridge.send(\"VKWebAppShowStoryBox\", { \"background_type\" : \"image\", \"url\" : \"https://sun9-10.userapi.com/impf/rMkBthcithc20cueRvyRi-pg8M2hAiMAOaYm8A/gvWX98KEYeU.jpg\" })}\n\t\t\t>\n\t\t\t  Поделиться в истории\n\t\t\t</ActionSheetItem>\n\t\t\t<ActionSheetItem autoclose before={<Icon20ArticleBoxOutline/>} onClick={() => bridge.send(\"VKWebAppShowWallPostBox\", {\"message\": \"Привет! Я играю в игру под названием #НичегоНеДелать.\\nПереходи по ссылке, и #НичегоНеДелай вместе со мной!\"})}\n\t\t\t>\n\t\t\t  Поделиться в посте\n\t\t\t</ActionSheetItem>\n\t\t\t<ActionSheetItem autoclose before={<Icon20UsersOutline/>} onClick={() => this.addGroups()}\n\t\t\t>\n\t\t\t  Добавить в сообщество \n\t\t\t</ActionSheetItem>\n\t\t  </ActionSheet>\n\t\t});\t  \n\t  }\n\n\n\trender() {\n     const modal = (\n\t\t<ModalRoot\n        activeModal={this.state.activeModal}\n        onClose={this.closeModal}\n      >\n        <ModalCard\n          id='ava-btn'\n          onClose={() => this.setState({activeModal: null})}\n\t\t  header=\"Зачем ты сюда нажал?\"\n\t\t  caption=\"Закрой это окно!\"\n          actions={[\n             {\n            title: 'Закрыть',\n            mode: 'primary',\n            action: () => {\n              this.setState({activeModal: null})\n            }\n\n          }]}\n        >\n\t\t\t\n        </ModalCard>\n\n\t  </ModalRoot>\n\t );\n\t\treturn (\n\t\t\t<ConfigProvider isWebView={true}>\n\t\t\t\t<View\n\t\t\t\t    modal={modal}\n\t\t\t\t\tactivePanel={this.state.activePanel}\n\t\t\t\t\tpopout={this.state.popout}\n\t\t\t\t>\n\t\t\t\t\t<Home id=\"home\"\n\t\t\t\t\t    message={this.state.message}\n\t\t\t\t\t    modal={this.modal}\n\t\t\t\t\t    openInvites={this.openInvites}\n\t\t\t\t\t\tfetchedUser={this.state.fetchedUser}\n\t\t\t\t\t\tgo={this.go}\n\t\t\t\t\t\tsnackbar={this.state.snackbar}\n\t\t\t\t\t\tpopout={this.state.popout}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</ConfigProvider>\n\t\t);\n\n\t}\n}\n\nexport default App;","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\nbridge.send(\"VKWebAppInit\");\n\nbridge.subscribe(({ detail: { type, data }}) => {\n\tif (type === \"VKWebAppUpdateConfig\") {\n\t\tconst schemeAttribute = document.createAttribute(\"scheme\");\n\t\tschemeAttribute.value = data.scheme ? data.scheme : \"bright_light\";\n\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t}\n});\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}